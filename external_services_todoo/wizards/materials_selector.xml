<odoo>
    <data>
        <!-- material.selection.wizard FORM for smart button -->
        <record model="ir.ui.view" id="material_selection_wizard_form">
            <field name="name">Material Selection Form</field>
            <field name="model">material.selection.wizard</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <div name="msg_opr_main">
                            <div>
                                <p colspan="2" class="alert alert-info info_icon" role="alert">
                                    <b>
                                        <u>
                                            <h3 style="font-weight:bold;color:#7d5a29">Info :
                                            </h3>
                                        </u>
                                        <ol>
                                            <li>
                                                Please Add the lines you want to be process
                                            </li>
                                            <li>
                                                All the selected lines will be "Process" automatically when you accept this page.
                                            </li>
                                            <li>
                                                Will have repercussion over the Sale Order related with this task
                                            </li>
                                        </ol>
                                    </b>
                                </p>
                            </div>
                        </div>
                        <field name="task_id" invisible="1"/>
                        <field name="material_filter_ids" invisible="1"/>
                        <field name="material_ids" widget="one2many" create="0"
                               domain="[('id','in', material_filter_ids)]"
                               options="{'no_create': True, 'no_open': True}">
                            <tree string="Materials">
                                <field name="sequence" readonly="True"/>
                                <field name="product_id"/>
                                <field name="name"/>
                                <field name="location_id"/>
                                <field name="location_dest_id"/>
                                <field name="lot_id"/>
                                <field name="product_qty"/>
                                <field name="product_uom"/>
                                <field name="is_billable"/>
                            </tree>
                            <form>
                                <header>
                                    <field name="state" widget="statusbar" required="True"/>
                                </header>
                                <sheet>
                                    <group>
                                        <group>
                                            <field name="product_id"/>
                                            <field name="name"/>
                                            <field name="product_qty"/>
                                            <field name="product_uom"/>
                                            <field name="is_billable"/>
                                        </group>
                                        <group>
                                            <field name="location_id"/>
                                            <field name="location_dest_id"/>
                                            <field name="lot_id"/>
                                            <field name="company_id"/>
                                            <field name="currency_id"/>
                                        </group>
                                        <group>
                                            <field name="purchase_order_id"/>
                                            <field name="purchase_line_id"/>
                                            <field name="sale_line_id"/>
                                            <field name="move_line_id"/>
                                            <field name="analytic_line_id"/>
                                        </group>
                                    </group>
                                </sheet>
                            </form>
                        </field>
                    </sheet>
                    <footer>
                        <button type="object"
                                name="action_select_materials_to_process"
                                string="Process"
                                class="oe_highlight"/>
                        <button special="cancel"
                                string="DISMISS"
                                class="btn-secondary"/>
                    </footer>
                </form>
            </field>
        </record>

        <!-- material selection for smart button Action-->
        <record model="ir.actions.act_window" id="action_material_selection_wizard">
            <field name="name">Select Materials to Process</field>
            <field name="res_model">material.selection.wizard</field>
            <field name="view_mode">form</field>
            <field name="view_id" ref="material_selection_wizard_form"/>
            <field name="target">new</field>
        </record>

        <!-- operation.selection.wizard FORM for smart button -->
        <record model="ir.ui.view" id="operation_selection_wizard_form">
            <field name="name">Operation Selection Form</field>
            <field name="model">operation.selection.wizard</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <div name="msg_opr_main">
                            <div>
                                <p colspan="2" class="alert alert-info info_icon" role="alert">
                                    <b>
                                        <u>
                                            <h3 style="font-weight:bold;color:#7d5a29">Info :
                                            </h3>
                                        </u>
                                        <ol>
                                            <li>
                                                Please Add the lines you want to be process
                                            </li>
                                            <li>
                                                All the selected lines will be "Process" automatically when you accept this page.
                                            </li>
                                            <li>
                                                Will have repercussion over the Sale Order related with this task
                                            </li>
                                        </ol>
                                    </b>
                                </p>
                            </div>
                        </div>
                        <field name="task_id" invisible="1"/>
                        <field name="operation_filter_ids" invisible="1"/>
                        <field name="operation_ids" widget="one2many" create="0"
                               domain="[('id','in', operation_filter_ids)]"
                               options="{'no_create': True, 'no_open': True}">
                            <tree string="Operations">
                                <field name="product_id"/>
                                <field name="name"/>
                                <field name="product_qty"/>
                                <field name="product_uom"/>
                                <field name="is_billable"/>
                                <field name="date_now"/>
                            </tree>
                            <form>
                                <header>
                                    <field name="state" widget="statusbar" required="True"/>
                                </header>
                                <sheet>
                                    <group>
                                        <group>
                                            <field name="product_id"/>
                                            <field name="name"/>
                                            <field name="product_qty"/>

                                        </group>
                                        <group>
                                            <field name="product_uom"/>
                                            <field name="is_billable"/>
                                            <field name="date_now"/>
                                            <field name="company_id"/>
                                        </group>
                                    </group>
                                </sheet>
                            </form>
                        </field>
                    </sheet>
                    <footer>
                        <button type="object"
                                name="action_select_operations_to_process"
                                string="Process"
                                class="oe_highlight"/>
                        <button special="cancel"
                                string="DISMISS"
                                class="btn-secondary"/>
                    </footer>
                </form>
            </field>
        </record>

        <!-- operation.selection.wizard for smart button Action-->
        <record model="ir.actions.act_window" id="action_operation_selection_wizard">
            <field name="name">Select Operations to Process</field>
            <field name="res_model">operation.selection.wizard</field>
            <field name="view_mode">form</field>
            <field name="view_id" ref="operation_selection_wizard_form"/>
            <field name="target">new</field>
        </record>
    </data>
</odoo>
