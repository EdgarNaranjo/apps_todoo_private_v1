<?xml version="1.0" ?>
<odoo>
    <data>
<!--         ot.material.line Form View-->
        <record id="ot_material_form_view" model="ir.ui.view">
            <field name="name">ot.material.line.form.view</field>
            <field name="model">ot.material.line</field>
            <field name="arch" type="xml">
                <form create="false" edit="false" delete="false" duplicate="false">
                    <header>
                        <field name="state" widget="statusbar" required="True"/>
                    </header>
                    <sheet>
                        <group>
                            <group>
                                <field name="product_id"/>
                                <field name="name"/>
                                <field name="product_qty"/>
                                <field name="estimated_qty"/>
                                <field name="product_uom"/>
                            </group>
                            <group>
                                <field name="location_id"/>
                                <field name="warehouse_id"/>
                                <field name="location_dest_id"/>
                                <field name="lot_id"/>
                                <field name="company_id"/>
                                <field name="currency_id"/>
                                <field name="is_billable"/>
                            </group>
                            <group>
                                <field name="sale_line_id"/>
                                <field name="analytic_line_id"/>
                                <field name="task_id"/>
                                <field name="sequence_name"/>
                            </group>
                            <group>
                                <field name="purchase_order_id"/>
                                <field name="purchase_line_id"/>
                                <field name="move_line_id"/>
                                <field name="management_stock"/>
                                <field name="check_process" invisible="True"/>
                                <field name="check_send"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- ot.material.line Tree View-->
        <record id="ot_material_line_tree_view" model="ir.ui.view">
            <field name="name">ot.material.line.tree.view</field>
            <field name="model">ot.material.line</field>
            <field name="arch" type="xml">
                <tree
                      decoration-info="state == 'new'"
                      decoration-success="state == 'process'"
                      decoration-muted="state == 'block'" create="false" duplicate="false">
                    <field name="sequence"/>
                    <field name="product_id" optional="show"/>
                    <field name="sequence_name" optional="show"/>
                    <field name="task_id" optional="show"/>
                    <field name="location_id" optional="show"/>
                    <field name="warehouse_id" optional="hide"/>
                    <field name="location_dest_id" optional="show"/>
                    <field name="lot_id" optional="show"/>
                    <field name="estimated_qty" optional="show"/>
                    <field name="product_qty" optional="show"/>
                    <field name="product_uom" optional="show"/>
                    <field name="is_billable" optional="show"/>
                    <field name="management_stock" optional="show"/>
                    <field name="check_process" column_invisible="True"/>
                    <field name="check_send" optional="hide"/>
                    <field name="company_id" optional="hide"/>
                    <field name="state" optional="show"  widget="badge" decoration-info="state == 'new'"
                           decoration-success="state == 'process'" decoration-muted="state == 'block'"/>
                </tree>
            </field>
        </record>

        <!-- ot.material.line search View -->
        <record model="ir.ui.view" id="ot_material_line_search">
            <field name="name">ot.material.line.search</field>
            <field name="model">ot.material.line</field>
            <field name="arch" type="xml">
                <search>
                    <field name="product_id"/>
                    <field name="location_id"/>
                    <field name="location_dest_id"/>
                    <field name="lot_id"/>
                    <field name="sale_line_id"/>
                    <field name="analytic_line_id"/>
                    <field name="task_id"/>
                    <field name="purchase_order_id"/>
                    <field name="purchase_line_id"/>
                    <field name="move_line_id"/>
                    <field name="company_id"/>
                    <field name="state"/>
                    <separator/>
                    <filter string="New" name="no_process" domain="[('state', '=', 'new')]"/>
                    <filter string="Processed" name="process" domain="[('state', 'in=', ['process', 'done'])]"/>
                    <filter string="Block" name="block" domain="[('state', '=', 'block')]"/>
                    <separator/>
                    <group expand="0" string="Group By">
                        <filter string="Product" name="group_product_id" domain="[]" context="{'group_by':'product_id'}"/>
                        <filter string="OT" name="group_task_id" domain="[]" context="{'group_by':'task_id'}"/>
                        <filter string="Origin Location" name="group_location_id" domain="[]" context="{'group_by':'location_id'}"/>
                        <filter string="Final Location" name="group_location_dest_id" domain="[]" context="{'group_by':'location_dest_id'}"/>
                        <filter string="Lote" name="group_location_lot_id" domain="[]" context="{'group_by':'lot_id'}"/>
                        <filter string="Company" name="group_company" domain="[]" context="{'group_by':'company_id'}"/>
                        <filter string="Status" name="group_state" domain="[]" context="{'group_by':'state'}"/>
                    </group>
                </search>
            </field>
        </record>

        <!--ot.material.line action model-->
        <record id="ot_material_line_action" model="ir.actions.act_window">
            <field name="name">Materials of OT</field>
            <field name="res_model">ot.material.line</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'search_default_process': 1}</field>
        </record>

        <!-- operation.line Form View-->
        <record id="operation_line_form_view" model="ir.ui.view">
            <field name="name">operation.line.form.view</field>
            <field name="model">operation.line</field>
            <field name="arch" type="xml">
                <form create="false" edit="false" delete="false" duplicate="false">
                    <header>
                        <field name="state" widget="statusbar" required="True"/>
                    </header>
                    <sheet>
                        <group>
                            <group>
                                <field name="product_id" options="{'no_create': True}"/>
                                <field name="name"/>
                                <field name="product_qty"/>
                            </group>
                            <group>
                                <field name="product_uom" options="{'no_create': True}"/>
                                <field name="is_billable"/>
                                <field name="check_process" invisible="True"/>
                                <field name="check_send"/>
                                <field name="company_id" options="{'no_create': True}"/>
                            </group>
                            <group>
                                <field name="sale_line_id" options="{'no_create': True}"/>
                                <field name="analytic_line_id" options="{'no_create': True}"/>
                                <field name="task_id" options="{'no_create': True}"/>
                                <field name="sequence_name"/>
                                <field name="technical_id" options="{'no_create': True}"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- operation.line Tree View-->
        <record id="operation_line_tree_view" model="ir.ui.view">
            <field name="name">operation.line.tree.view</field>
            <field name="model">operation.line</field>
            <field name="arch" type="xml">
                <tree
                      decoration-info="state == 'new'"
                              decoration-success="state == 'process'"
                              decoration-muted="state == 'block'" create="false" duplicate="false">
                    <field name="product_id" options="{'no_create': True}"
                                   readonly="state != 'new'" required="True"
                                   domain="[('detailed_type','=', 'service')]"/>
                    <field name="name" readonly="state != 'new'" required="True"/>
                    <field name="sequence_name" optional="show"/>
                    <field name="task_id" optional="show"/>
                    <field name="product_qty" readonly="state != 'new'"/>
                    <field name="product_uom" readonly="state != 'new'" required="True"/>
                    <field name="is_billable" readonly="state != 'new'"/>
                    <field name="date_now" readonly="state != 'new'"/>
                    <field name="check_process" column_invisible="True"/>
                    <field name="check_send" optional="hide"/>
                    <field name="create_date" optional="hide"/>
                    <field name="technical_id" optional="show" options="{'no_create': True}"/>
                    <field name="write_date" optional="hide"/>
                    <field name="is_readonly" column_invisible="True"/>
                    <field name="state" optional="show"  widget="badge" decoration-info="state == 'new'"
                           decoration-success="state == 'process'" decoration-muted="state == 'block'"/>
                </tree>
            </field>
        </record>

        <!-- operation.line search View -->
        <record model="ir.ui.view" id="operation_line_search">
            <field name="name">operation.line.search</field>
            <field name="model">operation.line</field>
            <field name="arch" type="xml">
                <search>
                    <field name="product_id"/>
                    <field name="name"/>
                    <field name="is_billable"/>
                    <field name="date_now"/>
                    <field name="check_process"/>
                    <field name="technical_id"/>
                    <field name="is_readonly"/>
                    <field name="task_id"/>
                    <field name="state"/>
                    <separator/>
                    <filter string="New" name="no_process" domain="[('state', '=', 'new')]"/>
                    <filter string="Processed" name="process" domain="[('state', '=', 'process')]"/>
                    <filter string="Block" name="block" domain="[('state', '=', 'block')]"/>
                    <separator/>
                    <group expand="0" string="Group By">
                        <filter string="Product" name="group_product_id" domain="[]" context="{'group_by':'product_id'}"/>
                        <filter string="OT" name="group_task_id" domain="[]" context="{'group_by':'task_id'}"/>
                        <filter string="Technic" name="group_technical_id" domain="[]" context="{'group_by':'technical_id'}"/>
                        <filter string="Date" name="group_date_now" domain="[]" context="{'group_by':'date_now'}"/>
                        <filter string="Status" name="group_state" domain="[]" context="{'group_by':'state'}"/>
                    </group>
                </search>
            </field>
        </record>

        <!--ot.material.line action model-->
        <record id="operation_line_action" model="ir.actions.act_window">
            <field name="name">Operations of OT</field>
            <field name="res_model">operation.line</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'search_default_process': 1}</field>
        </record>

        <menuitem id="fsm_menu_all_material_root" name="Lines of OT" sequence="16" parent="industry_fsm.fsm_menu_root"
                  groups="industry_fsm.group_fsm_user"/>
        <menuitem id="fsm_menu_all_material_item" name="Materials of OT" action="ot_material_line_action" sequence="1"
                  parent="fsm_menu_all_material_root" groups="industry_fsm.group_fsm_user"/>
        <menuitem id="fsm_menu_all_operation_item" name="Operations of OT" action="operation_line_action" sequence="2"
                  parent="fsm_menu_all_material_root" groups="industry_fsm.group_fsm_user"/>
        <menuitem id="fsm_menu_all_material_item_stock" name="Materials of OT" action="ot_material_line_action" sequence="99"
                  parent="stock.menu_stock_inventory_control"/>
    </data>
</odoo>
